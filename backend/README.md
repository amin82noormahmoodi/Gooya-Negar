# GooyaNegar Speech-to-Text API

API ุจุฑุง ุชุจุฏู ูุงูโูุง ุตูุช ุจู ูุชู ุจุง ุงุณุชูุงุฏู ุงุฒ Google Speech Recognition

## ูฺฺฏโูุง

- ๐ต ูพุดุชุจุงู ุงุฒ ูุฑูุชโูุง ูุฎุชูู ุตูุช (MP3, WAV, M4A, OGG, FLAC ู...)
- ๐ ูพุดุชุจุงู ุงุฒ ุฒุจุงูโูุง ูุฎุชูู (ูุงุฑุณุ ุงูฺฏูุณุ ุนุฑุจ ู...)
- ๐ API ุณุฑุน ู ฺฉุงุฑุขูุฏ ุจุง FastAPI
- ๐ ูุณุชูุฏุงุช ุฎูุฏฺฉุงุฑ Swagger
- ๐ง ูพุฑุฏุงุฒุด ู ุจูููโุณุงุฒ ูุงูโูุง ุตูุช
- โ ูุฏุฑุช ุฎุทุงูุง ู validation

## ูพุดโูุงุฒูุง

- Python 3.8 ุง ุจุงูุงุชุฑ
- ุงุชุตุงู ุจู ุงูุชุฑูุช (ุจุฑุง Google Speech Recognition)
- ffmpeg (ุจุฑุง ูพุฑุฏุงุฒุด ูุงูโูุง ุตูุช)

### ูุตุจ ffmpeg

**Windows:**
```bash
# ุจุง chocolatey
choco install ffmpeg

# ุง ุฏุงูููุฏ ูุณุชูู ุงุฒ https://ffmpeg.org/download.html
```

**macOS:**
```bash
brew install ffmpeg
```

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install ffmpeg
```

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

1. **ูุตุจ ูุงุจุณุชฺฏโูุง:**
```bash
pip install -r requirements.txt
```

2. **ุงุฌุฑุง ุณุฑูุฑ:**
```bash
# ุฑูุด ุงูู - ุจุง uvicorn ูุณุชูู
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

# ุฑูุด ุฏูู - ุงุฌุฑุง ูุงู main.py
python main.py
```

3. **ูุดุงูุฏู ูุณุชูุฏุงุช API:**
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## ุงุณุชูุงุฏู ุงุฒ API

### 1. ุจุฑุฑุณ ูุถุนุช ุณุฑูุฑ
```bash
curl http://localhost:8000/health
```

### 2. ุชุจุฏู ูุงู ุตูุช ุจู ูุชู
```bash
curl -X POST "http://localhost:8000/transcribe" \
  -H "accept: application/json" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@audio_file.mp3" \
  -F "language=fa-IR"
```

### 3. ุฏุฑุงูุช ูุณุช ุฒุจุงูโูุง ูพุดุชุจุงู ุดุฏู
```bash
curl http://localhost:8000/languages
```

## ูพุงุฑุงูุชุฑูุง API

### POST /transcribe

**ูพุงุฑุงูุชุฑูุง:**
- `file` (ุงุฌุจุงุฑ): ูุงู ุตูุช ุจุฑุง ุชุจุฏู
- `language` (ุงุฎุชุงุฑ): ฺฉุฏ ุฒุจุงู (ูพุดโูุฑุถ: fa-IR)

**ูุฑูุชโูุง ูพุดุชุจุงู ุดุฏู:**
- MP3 (.mp3)
- WAV (.wav)
- M4A (.m4a)
- OGG (.ogg)
- FLAC (.flac)
- AAC (.aac)
- WebM (.webm)

**ุญุฏุงฺฉุซุฑ ุงูุฏุงุฒู ูุงู:** 50MB

### ฺฉุฏูุง ุฒุจุงู

| ฺฉุฏ | ุฒุจุงู |
|---|---|
| fa-IR | ูุงุฑุณ |
| en-US | ุงูฺฏูุณ ุขูุฑฺฉุง |
| en-GB | ุงูฺฏูุณ ุจุฑุชุงูุง |
| ar | ุนุฑุจ |
| tr | ุชุฑฺฉ |
| fr | ูุฑุงูุณู |
| de | ุขููุงู |
| es | ุงุณูพุงููู |
| ru | ุฑูุณ |
| zh | ฺู |

## ููููู Response

### ููููุชโุขูุฒ:
```json
{
  "success": true,
  "text": "ูุชู ุชุจุฏู ุดุฏู ุงุฒ ูุงู ุตูุช",
  "language": "fa-IR",
  "filename": "audio.mp3",
  "message": "ูุงู ุตูุช ุจุง ููููุช ุจู ูุชู ุชุจุฏู ุดุฏ"
}
```

### ุฎุทุง:
```json
{
  "success": false,
  "error": "ูุชุฃุณูุงูู ูุชูุงูุณุชู ูุญุชูุง ุตูุช ุฑุง ุชุดุฎุต ุฏูู",
  "message": "ูุทูุงู ฺฉูุช ุตูุช ู ูุถูุญ ฺฏูุชุงุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ"
}
```

## ูฺฉุงุช ููู

1. **ฺฉูุช ุตูุช:** ุจุฑุง ูุชุงุฌ ุจูุชุฑุ ุงุฒ ูุงูโูุง ุตูุช ุจุง ฺฉูุช ุจุงูุง ุงุณุชูุงุฏู ฺฉูุฏ
2. **ูุถูุญ ฺฏูุชุงุฑ:** ฺฏูุชุงุฑ ูุงุถุญ ู ุจุฏูู ุณุฑ ู ุตุฏุง ุฒุงุฏ ุจูุชุฑู ูุชุงุฌ ุฑุง ูโุฏูุฏ
3. **ุทูู ูุงู:** ูุงูโูุง ฺฉูุชุงูโุชุฑ ูุนูููุงู ูุชุงุฌ ุจูุชุฑ ุฏุงุฑูุฏ
4. **ุงุชุตุงู ุงูุชุฑูุช:** API ุจู ุงุชุตุงู ุงูุชุฑูุช ุจุฑุง Google Speech Recognition ูุงุฒ ุฏุงุฑุฏ

## ุนุจโุงุจ

### ุฎุทุง "Couldn't find ffprobe or avprobe" (ููุฏูุฒ)
ุงู ุฎุทุง ุฑุงุฌ ุฏุฑ ููุฏูุฒ ุงุณุช. ุฑุงูโุญูโูุง:

**ุฑุงูโุญู ุณุฑุน:**
```bash
python fix_ffmpeg.py
```

**ุฑุงูโุญู ุฏุณุช:**
```bash
pip install imageio-ffmpeg==0.4.9 --upgrade
pip install python-magic-bin==0.4.14 --upgrade
```

**ุงฺฏุฑ ููฺูุงู ูุดฺฉู ุฏุงุฑุฏ:**
```bash
pip install -r requirements.txt --force-reinstall
```

### ุฎุทุง "Could not decode audio"
- ุจุฑุฑุณ ฺฉูุฏ ffmpeg ูุตุจ ุจุงุดุฏ (ุงุฒ `python fix_ffmpeg.py` ุงุณุชูุงุฏู ฺฉูุฏ)
- ูุฑูุช ูุงู ุตูุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุงู ุฎุฑุงุจ ูุจุงุดุฏ
- ุญุฌู ูุงู ุฒุฑ 50MB ุจุงุดุฏ

### ุฎุทุง "Request Error"
- ุงุชุตุงู ุงูุชุฑูุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ููฺฉู ุงุณุช ุณุฑูุณ Google ูููุชุงู ุฏุฑ ุฏุณุชุฑุณ ูุจุงุดุฏ

### ุฎุทุง "Unknown Value"
- ฺฉูุช ุตูุช ุฑุง ุจูุจูุฏ ุฏูุฏ
- ุณุทุญ ุตุฏุง ุฑุง ุงูุฒุงุด ุฏูุฏ
- ุณุฑ ู ุตุฏุง ูพุณโุฒููู ุฑุง ฺฉุงูุด ุฏูุฏ
- ูุงูโูุง ฺฉูุชุงูโุชุฑ ุงูุชุญุงู ฺฉูุฏ (ฺฉูุชุฑ ุงุฒ 1 ุฏููู)

## ูุงุณูุณ

MIT License 